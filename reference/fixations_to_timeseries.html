<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert a dataframe of fixation intervals to an evenly spaced timeseries — fixations_to_timeseries • blabr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert a dataframe of fixation intervals to an evenly spaced timeseries — fixations_to_timeseries"><meta name="description" content="

The fixations are first dropped/trimmed if t_max is set.
The fixation interval boundaries are then rounded up to the nearest
multiples of t_step.
Each fixation row is then duplicated as many time as there are time points
(also multiples of t_step) falling within the rounded up intervals. The
timepoins are stored in a new column time.
If a timepoint falls within multiple fixations, only the row with the
later fixation is kept.
If a timepoint doesn't fall within any fixations in a given trial, it won't
appear in the output at all.

"><meta property="og:description" content="

The fixations are first dropped/trimmed if t_max is set.
The fixation interval boundaries are then rounded up to the nearest
multiples of t_step.
Each fixation row is then duplicated as many time as there are time points
(also multiples of t_step) falling within the rounded up intervals. The
timepoins are stored in a new column time.
If a timepoint falls within multiple fixations, only the row with the
later fixation is kept.
If a timepoint doesn't fall within any fixations in a given trial, it won't
appear in the output at all.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blabr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.25.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert a dataframe of fixation intervals to an evenly spaced timeseries</h1>

      <div class="d-none name"><code>fixations_to_timeseries.Rd</code></div>
    </div>

    <div class="ref-description section level2">

<ul><li><p>The fixations are first dropped/trimmed if <code>t_max</code> is set.</p></li>
<li><p>The fixation interval boundaries are then rounded up to the nearest
multiples of <code>t_step</code>.</p></li>
<li><p>Each fixation row is then duplicated as many time as there are time points
(also multiples of <code>t_step</code>) falling within the rounded up intervals. The
timepoins are stored in a new column <code>time</code>.</p></li>
<li><p>If a timepoint falls within multiple fixations, only the row with the
later fixation is kept.</p></li>
<li><p>If a timepoint doesn't fall within any fixations in a given trial, it won't
appear in the output at all.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fixations_to_timeseries</span><span class="op">(</span><span class="va">fixations</span>, t_step <span class="op">=</span> <span class="fl">20</span>, t_max <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fixations">fixations<a class="anchor" aria-label="anchor" href="#arg-fixations"></a></dt>
<dd><p>A dataframe that must minimally contain the following
columns:</p><ul><li><p><code>recording_id</code> and <code>trial_index</code> that uniquely identify trials.</p></li>
<li><p><code>t_start</code>, <code>t_end</code> - the start and end times of the
fixations in ms. Use <code>read_*_report</code>, <code>split_*_report</code>, and
<code>merge_split_reports</code> to get such a dataframe.</p></li>
</ul></dd>


<dt id="arg-t-step">t_step<a class="anchor" aria-label="anchor" href="#arg-t-step"></a></dt>
<dd><p>The time step in ms.</p></dd>


<dt id="arg-t-max">t_max<a class="anchor" aria-label="anchor" href="#arg-t-max"></a></dt>
<dd><p>Optional. The maximum time in ms. Fixations that start after
this time will be removed and the end time of fixations that end after this
time will be set to this time.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataframe with similar columns as the input dataframe but with
many more rows. Here are the differences in columns:0</p><ul><li><p>A new column <code>time</code> was added that contains the time points that are
multiples of <code>t_step</code> and are within the fixation interval after it was
rounded up to the nearest multiple of <code>t_step</code>.</p></li>
<li><p>The <code>t_start</code> and <code>t_end</code> columns were renamed to <code>fixation_start</code> and
<code>fixation_end</code>.</p></li>
<li><p>Some fixations may have been dropped if they started after <code>t_max</code> or if
they were all in one time bin and it was shared with another fixation.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fixations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  recording_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  trial_index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  t_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">105</span>, <span class="fl">202</span>, <span class="fl">256</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  t_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">155</span>, <span class="fl">241</span>, <span class="fl">560</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t_step</span> <span class="op">&lt;-</span> <span class="fl">20</span></span></span>
<span class="r-in"><span><span class="va">t_max</span> <span class="op">&lt;-</span> <span class="fl">400</span></span></span>
<span class="r-in"><span><span class="fu">fixations_to_timeseries</span><span class="op">(</span><span class="va">fixations</span>, <span class="va">t_step</span>, <span class="va">t_max</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    recording_id trial_index fixation_start fixation_end   x y time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             1           1            105          155   0 0  120</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2             1           1            105          155   0 0  140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3             1           1            105          155   0 0  160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4             2           2            202          241 -50 0  220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5             2           2            202          241 -50 0  240</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7             3           3            256          400  50 0  260</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8             3           3            256          400  50 0  280</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9             3           3            256          400  50 0  300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10            3           3            256          400  50 0  320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11            3           3            256          400  50 0  340</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12            3           3            256          400  50 0  360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13            3           3            256          400  50 0  380</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14            3           3            256          400  50 0  400</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrei Amatuni.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

